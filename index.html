<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AVSync AI - MVP</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const knowledgeBase = {
      "how do i reset a crestron panel": "To reset a Crestron panel, press and hold the reset button for 10 seconds. Ensure the panel is powered on. If issues persist, check the network connection or consult the manual.",
      "how to connect to microsoft teams rooms": "Ensure the room system is powered on. Open the Teams app, sign in with your credentials, and select the meeting. Check HDMI and network connections if the display fails.",
      "troubleshoot projector not displaying": "Verify the projector is powered on and the correct input source is selected. Check cable connections (HDMI/VGA). Restart the projector and source device."
    };

    const App = () => {
      const [chatInput, setChatInput] = React.useState("");
      const [chatResponse, setChatResponse] = React.useState("");
      const [feedback, setFeedback] = React.useState({ usefulness: "", features: "", interest: "" });
      const [currentSection, setCurrentSection] = React.useState("landing");

      const handleChatSubmit = (e) => {
        e.preventDefault();
        const response = knowledgeBase[chatInput.toLowerCase()] || "Sorry, I don't have an answer for that yet. Try rephrasing or check the training module.";
        setChatResponse(response);
        setChatInput("");
      };

      const handleFeedbackChange = (e) => {
        setFeedback({ ...feedback, [e.target.name]: e.target.value });
      };

      const handleFeedbackSubmit = async (e) => {
        e.preventDefault();
        const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLScsYueijd9OXiFUuBZdxGSCN2mVh-mekZYTlHT6cCXGYrXvNw/formResponse";
        const formData = new FormData();
        formData.append("entry.1821405308", feedback.usefulness);
        formData.append("entry.1548474053", feedback.features);
        formData.append("entry.1659625676", feedback.interest);

        try {
          await fetch(formUrl, {
            method: "POST",
            body: formData,
            mode: "no-cors"
          });
          alert("Thank you for your feedback! It has been submitted successfully.");
          setFeedback({ usefulness: "", features: "", interest: "" });
        } catch (error) {
          alert("Error submitting feedback. Please try again.");
          console.error(error);
        }
      };

      const renderLanding = () => (
        <div className="text-center">
          <h1 className="text-4xl font-bold mb-4">Welcome to AVSync AI</h1>
          <p className="text-lg mb-6">Streamlining AV and IT workflows with AI-driven training and support. Designed for 2025's hybrid work environments.</p>
          <p className="text-md mb-4">Our MVP offers automated training for AV equipment and a basic AI chatbot for troubleshooting. Try it out and share your feedback!</p>
          <div className="space-x-4">
            <button onClick={() => setCurrentSection("training")} className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Explore Training</button>
            <button onClick={() => setCurrentSection("chat")} className="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Try AI Chat</button>
            <button onClick={() => setCurrentSection("feedback")} className="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">Give Feedback</button>
          </div>
        </div>
      );

      const renderTraining = () => (
        <div>
          <h2 className="text-2xl font-bold mb-4">Training Module</h2>
          <p className="mb-4">Select an AV equipment topic to view step-by-step guides:</p>
          <ul className="list-disc pl-6 mb-6">
            <li className="mb-2">
              <button onClick={() => alert(knowledgeBase["how to connect to microsoft teams rooms"])} className="text-blue-500 hover:underline">Connect to Microsoft Teams Rooms</button>
            </li>
            <li className="mb-2">
              <button onClick={() => alert(knowledgeBase["how do i reset a crestron panel"])} className="text-blue-500 hover:underline">Reset a Crestron Panel</button>
            </li>
            <li>
              <button onClick={() => alert(knowledgeBase["troubleshoot projector not displaying"])} className="text-blue-500 hover:underline">Troubleshoot Projector Issues</button>
            </li>
          </ul>
          <button onClick={() => setCurrentSection("landing")} className="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Back to Home</button>
        </div>
      );

      const renderChat = () => (
        <div>
          <h2 className="text-2xl font-bold mb-4">AI Support Chat</h2>
          <p className="mb-4">Ask a question about AV equipment (e.g., "How do I reset a Crestron panel?"):</p>
          <div className="mb-4">
            <input
              type="text"
              value={chatInput}
              onChange={(e) => setChatInput(e.target.value)}
              placeholder="Type your question..."
              className="w-full p-2 border rounded"
            />
            <button onClick={handleChatSubmit} className="bg-green-500 text-white px-4 py-2 mt-2 rounded hover:bg-green-600">Ask</button>
          </div>
          {chatResponse && (
            <div className="bg-gray-100 p-4 rounded">
              <p><strong>Response:</strong> {chatResponse}</p>
            </div>
          )}
          <button onClick={() => setCurrentSection("landing")} className="bg-gray-500 text-white px-4 py-2 mt-4 rounded hover:bg-gray-600">Back to Home</button>
        </div>
      );

      const renderFeedback = () => (
        <div>
          <h2 className="text-2xl font-bold mb-4">Feedback</h2>
          <p className="mb-4">Help us shape AVSync AI! Share your thoughts:</p>
          <div className="mb-4">
            <label className="block mb-2">How useful is this platform for your AV/IT needs?</label>
            <textarea
              name="usefulness"
              value={feedback.usefulness}
              onChange={handleFeedbackChange}
              className="w-full p-2 border rounded"
              placeholder="Share your thoughts..."
            ></textarea>
          </div>
          <div className="mb-4">
            <label className="block mb-2">What features would you like to see?</label>
            <textarea
              name="features"
              value={feedback.features}
              onChange={handleFeedbackChange}
              className="w-full p-2 border rounded"
              placeholder="E.g., pricing database, interoperability tools..."
            ></textarea>
          </div>
          <div className="mb-4">
            <label className="block mb-2">Would you be interested in a subscription (e.g., $50/month for small setups)?</label>
            <textarea
              name="interest"
              value={feedback.interest}
              onChange={handleFeedbackChange}
              className="w-full p-2 border rounded"
              placeholder="Yes/No and why..."
            ></textarea>
          </div>
          <button onClick={handleFeedbackSubmit} className="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">Submit Feedback</button>
          <button onClick={() => setCurrentSection("landing")} className="bg-gray-500 text-white px-4 py-2 mt-2 ml-2 rounded hover:bg-gray-600">Back to Home</button>
        </div>
      );

      return (
        <div className="min-h-screen bg-gray-100 flex items-center justify-center p-4">
          <div className="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full">
            {currentSection === "landing" && renderLanding()}
            {currentSection === "training" && renderTraining()}
            {currentSection === "chat" && renderChat()}
            {currentSection === "feedback" && renderFeedback()}
          </div>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById("root"));
  </script>
</body>
</html>
